# 바닐라 자바스크립트 By 고승원

> 라이브러리 직접 구현해보기 
> 다국어를 적용하는 라이브러리
> i18n은 internationalization(국제화)의 첫문자인 i와 마지막 문자인 n 사이에 18개의 문자가 있어
> 이를 줄여서 i18n으로 표현


  ## 주목할 함수

##  1. document.querySelectorAll("[태그내 속성이름]");
    + 태그 내 특정 속성을 가지고 있는 모든 HTML요소를 찾아 반환한다.
~~~Java Script
<body> 
 <h1 data-i18n="Order List"></h1>
 <button data-i18n="Search"></button>
 <script>
     const i18n = {
         en: {
             "Order List": "Order List",
             "Search": "Search",
         },
         ko: {
             "Order List": "주문 목록",
             "Search": "조회",
         },
     };
    const userLanguage = "en"; // 사용자 언어는 한국어
    /*
     * HTML 요소 중 data-i18n 속성을 가지는 모든 HTML 요소를 찾아 현재 사용자의 언어에 맞는 텍스트 값으로 변경하는 함수
     * data-i18n 속성에 정의된 값은 변수 i18n의 각 언어 코드별로 정의된 오브젝트 키와 일치해야함.
     */  
     function loadTranslation(){
         // data-i18n 속성을 가지고 있는 모든 HTML요소 가져오기
        var i18ns = document.querySelectorAll("[data-i18n]");
        for(const item of i18ns){
            item.innerText = i18n[userLanguage][item.getAttribute("data-i18n")]; 
          // HTML 요소의 텍스트를 i18n의 사용자코드에 정의된 값으로 할당
        }
     }
     // load 이벤트가 발생하면 loadTranslation 함수를 호출해서 화면에 다국어적용이 필요한 모든 HTML 요소를 찾아 다국어를 적용함
     window.addEventListener("load" , loadTranslation);
 </script>
</body>
~~~

##  2. 정규식 표현
    + 
    
    


~~~Java Script
    <body>
  
 <h1 data-i18n="Order List"></h1>
 <button data-i18n="Search"></button>

 <script>
   const i18n = {
       en: {
           "My Name is {fullName}. I am from {city}.": "My Name is {fullName}. I am from {city}."
       },

       kr: { 
           "My Name is {fullName}. I am from {city}.": "제 이름은  {fullName} 입니다. 저는 {city} 출신입니다."
       },
   }
   /*
    * 다국어 번역 문자열 내용 중 중괄호{} 안의 key와 동일한 오브젝트 데이터의 key를 찾아서 그 값으로 치환하는 함수
    * @param {String} from - 다국어 번역 내용
    * @param {Object} params - 다국어 번역내용 중 특정내용을 치환하기 위한 오브젝트 데이터
    * @returns 다국어 적용 문자열
    */
   
    function t(form, params = {}){
        return form.replace(/{[^}]*}/g, match =>{
            console.log(match);
        return params[match.slice(1, -1)]; 
    
    });
    }

    var data = {
        id: "1",
        fullName: "Hyebin Yu",
        city: "Geoje",
        company: "Minerva Gas Inc.",
    }
    const enText = t(i18n["en"]["My Name is {fullName}. I am from {city}."], data);
    console.log(enText); // My Name is Hyebin Yu. I am from Geoje.

    const krText = t(i18n["kr"]["My Name is {fullName}. I am from {city}."], data);
    console.log(krText); // 제 이름은  Hyebin Yu 입니다. 저는 Geoje 출신입니다.
 </script>
</body>
~~~
